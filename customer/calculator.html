<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Realty – Lot Calculator</title>
    <link rel="stylesheet" href="/assets/css/main.css">


    <style>
/* ===== GLOBAL ===== */
body {
  margin: 0;
  font-family: "Poppins", sans-serif;
  background: #e7f2ed;
  display: flex;
  flex-direction: column;
}

/* ===== PAGE CONTENT (NOT NAVBAR) ===== */
.page-wrapper {
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 40px 12px;
}

/* ===== HEADER / TITLE ===== */
.header {
  text-align: center;
  margin-bottom: 30px;
}

.header h1 {
  font-size: 32px;
  color: #1e5f3b;
  margin: 0;
  font-weight: 700;
}

.header p {
  color: #4b665a;
  margin-top: 6px;
  font-size: 15px;
}

/* ===== MAIN CARD ===== */
.card {
  background: white;
  width: 100%;
  max-width: 520px;
  padding: 30px;
  border-radius: 20px;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
}

/* ===== FORM ELEMENTS ===== */
label {
  display: block;
  margin-top: 16px;
  font-weight: 600;
  color: #1e3d32;
}

input,
select {
  width: 100%;
  padding: 12px;
  margin-top: 8px;
  border-radius: 10px;
  border: 1px solid #cdd5d1;
  font-size: 16px;
  outline: none;
}

input:focus,
select:focus {
  border-color: #1e8e52;
  box-shadow: 0 0 0 2px rgba(30, 142, 82, 0.15);
}

/* ===== BUTTON ===== */
button {
  margin-top: 26px;
  width: 100%;
  padding: 14px;
  background: #1e8e52;
  border: none;
  color: white;
  border-radius: 12px;
  font-size: 18px;
  font-weight: 600;
  cursor: pointer;
  transition: 0.2s;
}

button:hover {
  background: #177444;
}

/* ===== RESULT BOX ===== */
.result-box {
  margin-top: 26px;
  background: #f0fdf4;
  padding: 20px;
  border-left: 6px solid #1e8e52;
  border-radius: 12px;
  display: none;
}

.result-box h3 {
  margin-top: 0;
  color: #1e5f3b;
  font-size: 18px;
}

.result-line {
  margin: 8px 0;
  font-size: 16px;
}

.highlight {
  font-size: 22px;
  font-weight: 700;
  color: #177444;
}

/* ===== RESPONSIVE ===== */
@media (max-width: 480px) {
  .header h1 {
    font-size: 26px;
  }

  .card {
    padding: 22px;
  }
}
/* ===== MODAL OVERLAY ===== */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.45);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}

/* ===== MODAL BOX ===== */
.modal-box {
  background: white;
  padding: 28px 24px;
  width: 90%;
  max-width: 380px;
  border-radius: 16px;
  text-align: center;
  box-shadow: 0 12px 30px rgba(0, 0, 0, 0.2);
  animation: popIn 0.25s ease;
}

.modal-box h3 {
  margin: 0 0 10px;
  color: #1e5f3b;
  font-size: 22px;
}

.modal-box p {
  color: #4b665a;
  font-size: 15px;
  margin-bottom: 20px;
}

.modal-box button {
  width: 100%;
  padding: 12px;
  background: #1e8e52;
  border: none;
  color: white;
  border-radius: 10px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
}

.modal-box button:hover {
  background: #177444;
}

/* ===== ANIMATION ===== */
@keyframes popIn {
  from {
    transform: scale(0.85);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}


    </style>
</head>
<body>
    <div id="navbar"></div>

<div class="page-wrapper">
  <div class="header">

        <h1>Blessed R&C Development Corp. Calculator</h1>
        <p>Compute your lot price, down payment, and monthly amortization.</p>
    </div>

    <div class="card">
        <label>Lot Size (sqm):</label>
        <input
            type="number"
            id="sqm"
            placeholder="Minimum of 100 sqm"
            min="100"
            step="1"

>
  <label>Price per sqm (₱):</label>
<input
  type="number"
  id="price"
  readonly
  style="background:#f3f3f3; cursor:not-allowed;">


        <label>Years to Pay:</label>
        <select id="years">
            <option value="1">1 year</option>
            <option value="2">2 years</option>
            <option value="3">3 years</option>
            <option value="4">4 years</option>
            <option value="5">5 years</option>
        </select>

        <button onclick="compute()">Calculate</button>

        <div class="result-box" id="resultBox">
            <h3>Computation Result</h3>
            <div class="result-line" id="totalPrice"></div>
            <div class="result-line" id="downPayment"></div>
            <div class="result-line" id="balance"></div>
            <div class="result-line" id="months"></div>
            <div class="result-line highlight" id="monthlyPay"></div>
        </div>
    </div>

    <!-- CUSTOM MODAL -->
<div class="modal-overlay" id="modalOverlay">
  <div class="modal-box">
    <h3>Notice</h3>
    <p id="modalMessage">Message here</p>
    <button onclick="closeModal()">OK</button>
  </div>
</div>

<script>
/* ================= MODAL FUNCTIONS ================= */
function showModal(message) {
  const overlay = document.getElementById("modalOverlay");
  const msg = document.getElementById("modalMessage");

  if (!overlay || !msg) {
    alert(message); // fallback safety
    return;
  }

  msg.textContent = message;
  overlay.style.display = "flex";
}

function closeModal() {
  const overlay = document.getElementById("modalOverlay");
  if (overlay) overlay.style.display = "none";
}

/* ================= PAGE INIT ================= */
document.addEventListener("DOMContentLoaded", () => {
  const priceInput = document.getElementById("price");
  const params = new URLSearchParams(window.location.search);

  // STRICT read from URL ONLY
  const rawPrice = params.get("price_per_sqm");

  console.log("Calculator URL:", window.location.href);
  console.log("Price param:", rawPrice);

  // ❌ Missing or invalid param
  if (!rawPrice || rawPrice === "null" || rawPrice === "undefined" || isNaN(rawPrice)) {
    showModal("No property selected. Please go back and choose a property first.");
    return;
  }

  const price = Number(rawPrice);

  // ❌ Invalid value
  if (price <= 0) {
    showModal("Invalid property price.");
    return;
  }

  // ✅ SUCCESS
  priceInput.value = price;
});

/* ================= CALCULATOR LOGIC ================= */
function compute() {
  const sqm = Number(document.getElementById("sqm").value);
  const pricePerSqm = Number(document.getElementById("price").value);
  const years = Number(document.getElementById("years").value);

  if (!sqm || sqm < 100) {
    showModal("Lot size must be at least 100 sqm.");
    return;
  }

  if (!pricePerSqm || pricePerSqm <= 0) {
    showModal("Invalid price per sqm.");
    return;
  }

  if (!years || years <= 0) {
    showModal("Please select years to pay.");
    return;
  }

  const totalPrice = sqm * pricePerSqm;
  const downPayment = totalPrice * 0.30; // ✅ 30% DP
  const balance = totalPrice - downPayment;
  const months = years * 12;
  const monthly = balance / months;

  document.getElementById("totalPrice").textContent =
    "Total Price: ₱" + totalPrice.toLocaleString();

  document.getElementById("downPayment").textContent =
    "Down Payment (30%): ₱" + downPayment.toLocaleString();

  document.getElementById("balance").textContent =
    "Remaining Balance: ₱" + balance.toLocaleString();

  document.getElementById("months").textContent =
    "Payment Duration: " + months + " months";

  document.getElementById("monthlyPay").textContent =
  "Monthly Payment: ₱" + monthly.toLocaleString(undefined, {
    minimumFractionDigits: 2,
    maximumFractionDigits: 2
  });

  document.getElementById("resultBox").style.display = "block";
}
</script>

<script src="/assets/js/navbar.js"></script>

</body>
</html>
